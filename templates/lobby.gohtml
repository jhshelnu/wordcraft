<html lang="en">
    <head>
        <title>wordgame</title>
        <script>
            const lobbyId = {{ .lobbyId }};

            function renderNewClientCard(newClientId, displayName, iconName, isMe) {
                let clientsList = document.getElementById("clients-list")
                let template = document.createElement("template")
                template.innerHTML = `
                    <div data-client-id="${newClientId}" class="card card-compact bg-base-100 w-52 shadow-2xl">
                        <img
                            class="mask max-w-36 mx-auto"
                            src="/static/icons/${iconName}"
                            alt="${iconName}" />
                        <div class="card-body items-center">
                            ${isMe
                                ? `<input id="my-display-name" class="input card-title text-center w-44" value="${displayName}">`
                                : `<p data-display-name class="card-title">${displayName}</p>`
                            }
                            <div data-current-guess-pill class="rounded-full min-w-24 h-8 leading-8 bg-secondary text-center" style="visibility: hidden">
                                <p data-current-guess class="font-bold px-3" style="color: oklch(var(--sc))"></p>
                            </div>
                        </div>
                    </div>
                `
                clientsList.appendChild(template.content)
            }

            document.addEventListener("DOMContentLoaded", () => {
                {{range .clients}}
                renderNewClientCard({{.clientId}}, {{.displayName}}, {{.iconName}}, false)
                {{end}}
            })
        </script>
        <script src="/static/thirdparty/gsap.min.js"></script>
        <script src="/static/lobby.js"></script>
        <link rel="stylesheet" href="/static/main.css">
        <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    </head>
    <body class="flex flex-col items-center">
        <h2 id="status-text" class="h2 w-full text-center" style="display: none">Challenge: <span id="challenge-text"></span></h2>
        <div id="clients-list" class="flex flex-row gap-4 mt-10"></div>

        <div id="challenge-input-section" class="mt-14" style="display: none">
            <label for="answer-input"></label>
            <input id="answer-input" type="text" class="input input-accent w-50" />
        </div>

        <button id="start-game-button" class="btn btn-accent min-w-36 text-lg mt-14" disabled>Waiting for players...</button>
    </body>
</html>